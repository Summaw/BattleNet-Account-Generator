(async()=>{function e(){var e,t;if(!r())return e="true"===document.querySelector(".recaptcha-checkbox")?.getAttribute("aria-checked"),t=document.querySelector("#recaptcha-verify-button")?.disabled,e||t}function r(){return"Try again later"===document.querySelector(".rc-doscaptcha-header")?.innerText}async function t(){e()||(await Time.sleep(500),document.querySelector("#recaptcha-anchor")?.click())}async function c(t){var c=await BG.exec("get_cache",{name:"recaptcha_visible",tab_specific:!0});if(!0===c&&!e())if(r())await BG.exec("reset_recaptcha");else{c=document.querySelector(".rc-audiochallenge-tdownload-link")?.href,c=(fetch(c),document.querySelector("#audio-source")?.src?.replace("recaptcha.net","google.com"));let e=document.querySelector("html")?.getAttribute("lang")?.trim();e&&0!==e.length||(e="en");var a=Time.time(),c=await Net.fetch("https://engageub.pythonanywhere.com",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"input="+encodeURIComponent(c)+"&lang="+e}),c=(document.querySelector("#audio-response").value=c,t.recaptcha_solve_delay-(Time.time()-a));0<c&&await Time.sleep(c),document.querySelector("#recaptcha-verify-button")?.click()}}for(;;){await Time.sleep(1e3);var a=await BG.exec("get_settings");a&&"voice"===a.recaptcha_solve_method&&(async function(){var t=document.querySelectorAll('iframe[src*="/recaptcha/api2/bframe"]');if(0<t.length){let e=!1;for(const c of t)if(e="visible"===window.getComputedStyle(c).visibility)break;e?await BG.exec("set_cache",{name:"recaptcha_visible",value:!0,tab_specific:!0}):await BG.exec("set_cache",{name:"recaptcha_visible",value:!1,tab_specific:!0})}}(),a.recaptcha_auto_open&&null!==document.querySelector(".recaptcha-checkbox")?await t():a.recaptcha_auto_solve&&null!==document.querySelector(".rc-imageselect-instructions")?await(!0===await BG.exec("get_cache",{name:"recaptcha_visible",tab_specific:!0})&&!e()&&(await Time.sleep(500),!document.querySelector("#recaptcha-audio-button")?.click())):!a.recaptcha_auto_solve||null===document.querySelector("#audio-instructions")&&null===document.querySelector(".rc-doscaptcha-header")||await c(a))}})();
